<div class="container mt-4">
  <h2 class="mb-4">Jurnal Vizitatori</h2>

  <!-- Date filter -->
  <div class="row mb-3">
    <div class="col-md-4">
      <div class="input-group">
        <input
          type="date"
          class="form-control"
          [value]="selectedDate"
          (change)="onDateSelect($event)"
          placeholder="Filtrează după dată">
        <button
          class="btn btn-outline-secondary"
          type="button"
          (click)="clearDateFilter()">
          <i class="bi bi-x-circle"></i>
        </button>
      </div>
    </div>
    <div class="col-md-8 text-md-end">
        <button class="btn btn-primary" routerLink="/portar/adaugare-vizitator">
            <i class="bi bi-plus-circle"></i> Adaugă Înregistrare
        </button>
    </div>
  </div>

  <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th (click)="toggleSort('id_vizitator')" style="cursor:pointer">
            ID Log <i class="bi" [ngClass]="getSortIcon('id_vizitator')"></i>
          </th>
          <th (click)="toggleSort('nume')" style="cursor:pointer">
            Nume <i class="bi" [ngClass]="getSortIcon('nume')"></i>
          </th>
          <th (click)="toggleSort('tip_log')" style="cursor:pointer">
            Tip <i class="bi" [ngClass]="getSortIcon('tip_log')"></i>
          </th>
          <th (click)="toggleSort('data_log')" style="cursor:pointer">
            Data și Ora <i class="bi" [ngClass]="getSortIcon('data_log')"></i>
          </th>
          <th>Acțiuni</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let log of logs"> 
          <td>{{ log.id_vizitator }}</td>
          <td>{{ log.nume }}</td>
          <td>{{ log.tip_log }}</td> <!-- Just show the value directly since it's already "IN" or "OUT" -->
          <td>{{ log.data_log | date:'dd/MM/yyyy HH:mm' }}</td>
          <td>
            <button class="btn btn-sm btn-danger" (click)="deleteLog(log.id_vizitator)">
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
        <tr *ngIf="logs.length === 0">
          <td colspan="5" class="text-center">Nu există înregistrări pentru data selectată sau în total.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <button class="btn btn-secondary mt-3" routerLink="/gate-home">
    <i class="bi bi-arrow-left"></i> Înapoi
  </button>
</div>
